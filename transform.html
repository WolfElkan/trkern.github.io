<!DOCTYPE html>
<html>
<head>
<script src="math.min.js" type="text/javascript"></script>
<script src="d3.min.js" type="text/javascript"></script>
<script src="function-plot.js" type="text/javascript"></script>
<script src="katex.min.js" type="text/javascript"></script>
<script>
//Based on http://mathjs.org/examples/browser/plot.html.html

var cat = [[-341, 289], [-333, 297], [-321, 307], [-315, 315], [-307, 325], [-311, 341], [-319, 371], [-273, 355], [-273, 371], [-255, 363], [-241, 353], [-231, 339], [-227, 333], [-209, 327], [-197, 313], [-185, 301], [-171, 289], [-157, 267], [-147, 251], [-129, 231], [-115, 209], [-99, 199], [-75, 191], [-51, 181], [-39, 179], [-25, 173], [-3, 167], [17, 159], [37, 147], [53, 139], [67, 129], [81, 117], [89, 105], [99, 91], [109, 79], [119, 61], [131, 45], [137, 21], [139, -1], [137, -31], [135, -63], [133, -89], [125, -115], [119, -139], [119, -155], [135, -163], [149, -163], [171, -161], [187, -159], [203, -155], [223, -155], [247, -157], [267, -161], [291, -175], [307, -183], [323, -193], [333, -207], [345, -223], [355, -237], [367, -247], [385, -261], [395, -269], [407, -255], [417, -263], [413, -279], [401, -301], [389, -309], [371, -307], [353, -297], [341, -273], [331, -253], [315, -227], [299, -211], [289, -203], [263, -195], [221, -187], [161, -199], [131, -211], [103, -217], [59, -235], [29, -245], [-5, -245], [-33, -251], [-53, -247], [-125, -239], [-167, -245], [-241, -247], [-249, -233], [-247, -215], [-219, -207], [-217, -67], [-217, -59], [-225, -37], [-239, -7], [-255, 19], [-271, 41], [-281, 69], [-281, 87], [-279, 115], [-275, 139], [-281, 161], [-287, 181], [-317, 183], [-329, 179], [-351, 203], [-363, 229], [-343, 267], [-341, 289]];


function rounder(n) {
	return(math.round(100*n)/100);
	}

function labelpoints() {
	var a = Number(document.getElementById("a").value);
	var b = Number(document.getElementById("b").value);
	var c = Number(document.getElementById("c").value);
	var d = Number(document.getElementById("d").value);
	eqn = document.getElementById("eq").value;
	eqn = transformize(eqn);
	pointlist = [];
	for (i = 0; i <= 3; i++) {
		pointlist.push([rounder((i-c)/b),rounder(math.eval(eqn,{x:(i-c)/b}))]);
		}
	d3.selectAll("#coo").remove();
	var hook = d3.selectAll("#ptz")[0];
	var i;
	for (i = 0; i < hook.length; i++) {
		d3.select(".graph").append("text").attr("id","coo").attr("font-size", 14).attr("fill","green").attr("x",hook[i].cx.baseVal.value).attr("y",hook[i].cy.baseVal.value).text("  (" + pointlist[i] + ")");
		}
	}

function afterdraw() {
	labelpoints();
	}

function plusify(n) {
	if (n > 0) {return("+"+n);}
	if (n == 0) {return("");}
	if (n < 0) {return(n);}
	}

function timesify(n,s) {
	if (n == 1) {return(s);}
//	if (n == 0) {return(0);}
	return(""+n+""+s);
	}

function transformize(eq) {
	var a = Number(document.getElementById("a").value);
	var b = Number(document.getElementById("b").value);
	var c = Number(document.getElementById("c").value);
	var d = Number(document.getElementById("d").value);
	var innerstring = "("+timesify(b,"x")+plusify(c)+")";
	var replstring = eq.replace(/(\(x\)|\bx\b)/gi,innerstring);
	var fullstring = ""+timesify(a,"("+replstring+")")+plusify(d);
	//var simplestring = math.parse(fullstring).toString();
	return(fullstring);
	}

function transformize2(eq,ga,gb,gc,gd) {
	var innerstring = "("+timesify(gb,"x")+plusify(gc)+")";
	var replstring = eq.replace(/(\(x\)|\bx\b)/gi,innerstring);
	var fullstring = ""+timesify(ga,"("+replstring+")")+plusify(gd);
	return(fullstring);
	}

function updateequation() {
	eqn = document.getElementById("eq").value;
	katex.render(math.parse(transformize(eqn)).toTex({parenthesis:"auto"}),document.getElementById("kx"));
	}

function Upd() {
	drawplot();
	updateequation();
	}

function Upds() {
	document.getElementById("an").value = Number(document.getElementById("a").value);
	document.getElementById("bn").value = Number(document.getElementById("b").value);
	document.getElementById("cn").value = Number(document.getElementById("c").value);
	document.getElementById("dn").value = Number(document.getElementById("d").value);
	Upd();
	}

function Updn() {
	document.getElementById("a").value = Number(document.getElementById("an").value);
	document.getElementById("b").value = Number(document.getElementById("bn").value);
	document.getElementById("c").value = Number(document.getElementById("cn").value);
	document.getElementById("d").value = Number(document.getElementById("dn").value);
	Upd();
	}

var inst;

function drawplot() {
	var a = Number(document.getElementById("a").value);
	var b = Number(document.getElementById("b").value);
	var c = Number(document.getElementById("c").value);
	var d = Number(document.getElementById("d").value);
	eq = document.getElementById("eq").value;
	eqn = transformize(eq);
	sktp = !document.getElementById("chkcrosshair").checked;
	var ovs = "visible";
	if(!document.getElementById("chkorig").checked) {
		ovs = "hidden";
		}
	var gvs = "visible";
	if(!document.getElementById("chkguide").checked) {
		gvs = "hidden";
		}
	pointlist = [];
	for (i = 0; i <= 3; i++) {
		pointlist.push([(i-c)/b,math.eval(eqn,{x:(i-c)/b})]);
		}
	var inf = 10000;
	var dlist = [
		{points: pointlist,
		fnType:'points',
		color: 'black',
		attr: {r: 4, id:"ptz"},
		graphType: 'scatter',
		skipTip: sktp},
		{fn: eqn,
		color: 'black',
		sampler: 'builtIn',
		graphType: 'polyline',
		attr: {style:"stroke-width:2"},
		skipTip: sktp},
		{fn: eq,
		color: "blue",
		sampler: "builtIn",
		graphType: "polyline",
		skipTip: true,
		attr: {visibility:ovs}},
		{points: [[-inf,d],[inf,d]],
		fnType: "points",
		graphType: "polyline",
		color:"yellow"},
		{points: [[-c/b,-inf],[-c/b,inf]],
		fnType: "points",
		graphType: "polyline",
		color:"yellow"}
		];
	inst = functionPlot({target: '#plot',
		tip: {xLine:true, yLine:true},
		grid: true,
		width: 500,
		height: 500,
		data: dlist,
		//annotations: [{x:-c/b},{y:d}]
		});
	inst.on("after:draw", afterdraw);
	labelpoints();
	}

function resetsliders() {
	document.getElementById("an").value = 1;
	document.getElementById("bn").value = 1;
	document.getElementById("cn").value = 0;
	document.getElementById("dn").value = 0;
	document.getElementById("a").value = 1;
	document.getElementById("b").value = 1;
	document.getElementById("c").value = 0;
	document.getElementById("d").value = 0;
	Upd();
	}

function stretchcat() {
	var rcat = [];
	h = document.getElementById("h").value;
	v = document.getElementById("v").value
	for (i = 0; i < cat.length; i++) {
		rcat.push([h*cat[i][0]/100,v*cat[i][1]/100]);
		}
	return(rcat);
	}

function drawcat() {
	document.getElementById("hs").innerHTML = document.getElementById("h").value;
	document.getElementById("vs").innerHTML = document.getElementById("v").value;
	functionPlot({target: "#cat",
		width: 500,
		height: 500,
		disableZoom: true,
		data: [{
			points: stretchcat(),
			fnType: "points",
			graphType:"polyline",
			attr: {style:"fill:orange;stroke:black"}
			}]
		});
	}

var funlist = ["x","x^2","x^3","x^4","sqrt(x)","cbrt(x)","abs(x)","1/x","sin(x)","sqrt(1-x^2)","floor(x)","log(x)","exp(x)","2^x"];

function bootselector() {
	var str = "<select oninput='doselect()' id='sel'>";
	for (i = 0; i < funlist.length; i++) {
		str += "<option value='" + funlist[i] + "'>" + funlist[i] + "</option>";
		}
	str += "</select>";
	document.getElementById("selector").innerHTML = str;
	}

function doselect() {
	document.getElementById("eq").value = document.getElementById("sel").value;
	Upd();
	}

function failgraph1() {
	resetsliders();
	document.getElementById("eq").value = "(sqrt(x^2+9)-3)/(x^2)";
	Upd();
	inst.programmaticZoom([-.001,.001],[.1666666,.1666668]);
	location.href="#top";	
	}

function failgraph2() {
	resetsliders();
	document.getElementById("eq").value = "(x+2)/(x^2+3x+2)";
	Upd();
	inst.programmaticZoom([-2.0000001,-1.9999999],[-1.0000001,-.9999999]);
	location.href="#top";
	}

function ribet(mn,mx) {
	return(Math.floor(Math.random()*(mx-mn+1))+mn);
	}

var ggfunlist = ["x", "x^2", "x^3", "x^4", "abs(x)", "sqrt(x)", "cbrt(x)"];
var ggfun = "";
function randomizegg() {
	document.getElementById("gganswer").innerHTML = "";
	var x1 = ribet(-3,3);
	var x2 = ribet(-3,3);
	while(x2 == x1) {
		x2 = ribet(-3,3);
		}
	var y1 = ribet(-3,3);
	var y2 = ribet(-3,3);
	while(y2 == y1) {
		y2 = ribet(-3,3);
		}
	if (!document.getElementById("chkgg").checked) {
		x2 = x1 + 1;
		do {y2 = y1 + ribet(-3,3);} while (y2 == y1 || y2 > 3 || y2 < -3);
		}
	var gga = y2-y1;
	var ggb = 1/(x2-x1);
	var ggc = -ggb*x1;
	var ggd = y1;
	ggfun = ggfunlist[ribet(0,6)];
	if (!document.getElementById("chkgg").checked) {
		ggfun = ggfunlist[ribet(0,4)];
		}
	ggfun = transformize2(ggfun,gga,ggb,ggc,ggd);
	Updgg();
	}

function Updgg() {
	console.log(ggfun);
	var tguess = document.getElementById("ggguess").value;
	if (tguess == "") {
		tguess = "10000";
		}
	functionPlot({
		target: "#ggplot",
		data: [{fn: ggfun, graphType: 'polyline', sampler: 'builtIn'},
			{fn: tguess, graphType: 'polyline', sampler: 'builtIn'}],
		grid: true,
		width: 500,
		height: 500
		});
	}

function showanswer() {
	//katex.render(math.parse(ggfun).toTex({parenthesis:"auto"}),document.getElementById("gganswer"));
	document.getElementById("gganswer").innerHTML = ggfun;
	}

</script>
<link rel="stylesheet" href="katex.min.css">
</head>
<body onload="Upd(); drawcat(); bootselector(); randomizegg()">
<a name = "top"> </a>
<h1> Function Transformations </h1>
Base Function: <input type="text" id="eq" value="x^2" onChange="Upd()">
<span id="selector"> </span>
<button onClick="Upd()"> Plot </button> <button onClick="resetsliders()"> Reset Sliders </button> <span id="kx"> </span> <br>
<table border = 0>
<tr> <td> a: </td> <td> <input type="range" min="-10" max="10" value="1" step =.05 id="an" oninput="Updn()" style="width:50em"> </td> <td> <input type="number" id="a" oninput="Upds()" value=1 step=.05 style="width:4em"> </td> </tr>
<tr> <td> b: </td> <td> <input type="range" min="-10" max="10" value="1" step =.05 id="bn" oninput="Updn()" style="width:50em"> </td> <td> <input type="number" id="b" oninput="Upds()" value=1 step=.05 style="width:4em"> </td> </tr>
<tr> <td> c: </td> <td> <input type="range" min="-10" max="10" value="0" step =.05 id="cn" oninput="Updn()" style="width:50em"> </td> <td> <input type="number" id="c" oninput="Upds()" value=0 step=.05 style="width:4em"> </td> </tr>
<tr> <td> d: </td> <td> <input type="range" min="-10" max="10" value="0" step =.05 id="dn" oninput="Updn()" style="width:50em"> </td> <td> <input type="number" id="d" oninput="Upds()" value=0 step=.05 style="width:4em"> </td> </tr>
</table>
<div id="plot"> </div>
<input type="checkbox" id="chkcrosshair" onchange="Upd()" checked> Show Mouse Crosshair <br>
<input type="checkbox" id="chkorig" onchange="Upd()" checked> Show Original Graph <br>
<input type="checkbox" id="chkguide" onchange="Upd()" checked> Show Guidelines <br>
<h1> Stretch a Cat </h1>
The cat below consists of a series of points connected by lines. The x and y coordinates of these points are multiplied by the constants you specify. <br>
How are stretching, squashing, and mirroring related?
<table border=0>
<tr> <td> Horizontal: </td> <td> <input type="range" min="-10" max="10" value="1" step =.1 id="h" oninput="drawcat()" style="width:30em"> </td> <td> <span id="hs"> </span> </td></tr>
<tr> <td> Vertical: </td> <td> <input type="range" min="-10" max="10" value="1" step =.1 id="v" oninput="drawcat()" style="width:30em"> </td> <td> <span id="vs"> </span></td></tr></table>
<div id="cat"> </div>
<h1> Guessing Game </h1>
<input type="text" id="ggguess" value="" onChange="Updgg()"> <button onclick="Updgg()"> Guess </button> <button onclick="randomizegg()"> Randomize </button> <button onclick="showanswer()"> Show Possible Answer </button>
<div id="ggplot"> </div>
<div id="gganswer"> </div>
<input type="checkbox" id="chkgg"> Check this box for a harder guessing game <br>
<h1> Play Elsewhere </h1>
<ul>
<li> Check out this incorrectly graphed function on <a href="https://www.wolframalpha.com/input/?i=(sqrt(x%5E2%2B9)-3)%2F(x%5E2)+from+-.001+to+.001">Wolfram Alpha</a>.
<button type="button" onclick="failgraph1()"> Try graphing it here </button> You can use calculus to show that the graph should be a smooth arc with a hole at x = 0. </li>
<li> Check out this incorrectly graphed function on <a href="https://www.desmos.com/calculator/jibdyuy9d7">Desmos</a>. <button type="button" onclick="failgraph2()"> Try graphing it here </button>. You already know enough to figure out that the graph of this function should look like the graph of 1/(x+1), with a hole at x = -2.
<li> <a href="https://www.desmos.com/calculator/aixbizuh4n"> Desmos </a> (You'll need to click the circle in row 16 on the left to get this to work. Replace the letter f by some other letter to change the function.) </li>
<li> <a href="https://www.geogebra.org/m/YnPa7gd5"> Geogebra </a> Lets you play with the stretch/shift constants, allows you to enter your own base functions. </li>
<li> <a href="https://www.geogebra.org/m/ebnN6qfE#material/TpD36gvK"> Geogebra </a> Lets you play with the stretch/shift constants. </li>
<li> <a href="https://www.geogebra.org/m/ebnN6qfE#material/Gk53hqja"> Geogebra </a> Transformed function guessing game. </li>
<li> <a href="http://www.math.cornell.edu/~tomkern/piecewise.html"> Piecewise Function Interactive </a>.
</ul>
</body>
</html>





