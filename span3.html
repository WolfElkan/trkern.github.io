<!DOCTYPE html>
<html>
<head>
<script src = "three.js"></script>
<script src = "OrbitControls.js"></script>
<script>
var scene,camera,renderer,controls;
	
function render() {
	requestAnimationFrame( render );
	renderer.render(scene, camera);
	};

function boot() {
	a = 0;
	b = 0;
	c = 0;
	scene = new THREE.Scene();
	scene.background = new THREE.Color("lightgray");
	camera = new THREE.PerspectiveCamera(75,1,.1,1000);
	renderer = new THREE.WebGLRenderer({canvas:document.getElementById("three")});
	controls = new THREE.OrbitControls(camera, renderer.domElement);
	renderer.setSize(500,500);
	bootobjects();
	Upd();
	camera.position.x = 2;
	camera.position.y = 2;
	camera.position.z = 2;
	camera.lookAt(0,0,0);
	render();
	}

function vec2vec(v) {
	return(new THREE.Vector3(v[0],v[1],v[2]));
	}

function thickvector(p1,p2,col) {
	p3 = [(.05*p1[0]+.95*p2[0]),(.05*p1[1]+.95*p2[1]),(.05*p1[2]+.95*p2[2])];
	thickline(p1,p3,col,.02);
	thickarrow(p3,p2,col,.05);
	}

function thickarrow(p1,p2,col,thk) {
	var dif = [p1[0]-p2[0],p1[1]-p2[1],p1[2]-p2[2]];
	var mid = [(p1[0]+p2[0])/2,(p1[1]+p2[1])/2,(p1[2]+p2[2])/2];
	var lg = vec2vec(dif).length();
	if (lg == 0) {return;}
	var cylgeo = new THREE.CylinderGeometry(thk,0,lg,8);
	var cyl = new THREE.Mesh(cylgeo, new THREE.MeshBasicMaterial({color:col}));
	var axis = new THREE.Vector3(0,1,0);
	cyl.position.copy(vec2vec(mid));
	cyl.quaternion.setFromUnitVectors(axis, vec2vec(dif).normalize());
	scene.add(cyl);
	}

function thickline(p1,p2,col,thk) {
	var dif = [p1[0]-p2[0],p1[1]-p2[1],p1[2]-p2[2]];
	var mid = [(p1[0]+p2[0])/2,(p1[1]+p2[1])/2,(p1[2]+p2[2])/2];
	var lg = vec2vec(dif).length();
	if (lg == 0) {return;}
	var cylgeo = new THREE.CylinderGeometry(thk,thk,lg,4);
	var cyl = new THREE.Mesh(cylgeo, new THREE.MeshBasicMaterial({color:col}));
	var axis = new THREE.Vector3(0,1,0);
	cyl.position.copy(vec2vec(mid));
	cyl.quaternion.setFromUnitVectors(axis, vec2vec(dif).normalize());
	scene.add(cyl);
	}

var a, b, c, u1, u2, u3, v1, v2, v3, w1, w2, w3, x1, x2, x3;

function rounder(x) {
	return(Math.round(x * 100)/100);
	}

function getvars() {
	u1 = rounder(document.getElementById("u1").value);
	u2 = rounder(document.getElementById("u2").value);
	u3 = rounder(document.getElementById("u3").value);
	v1 = rounder(document.getElementById("v1").value);
	v2 = rounder(document.getElementById("v2").value);
	v3 = rounder(document.getElementById("v3").value);
	w1 = rounder(document.getElementById("w1").value);
	w2 = rounder(document.getElementById("w2").value);
	w3 = rounder(document.getElementById("w3").value);
	x1 = rounder(a * u1 + b * v1 + c * w1);
	x2 = rounder(a * u2 + b * v2 + c * w2);
	x3 = rounder(a * u3 + b * v3 + c * w3);
	}

function updui() { //updates ui
	document.getElementById("x1").innerHTML = x1;
	document.getElementById("x2").innerHTML = x2;
	document.getElementById("x3").innerHTML = x3;
	document.getElementById("ar").value = a;
	document.getElementById("br").value = b;
	document.getElementById("cr").value = c;
	document.getElementById("an").value = a;
	document.getElementById("bn").value = b;
	document.getElementById("cn").value = c;
	}

function AC() {
	var n = a+b+c;
	if (n != 0) {
		a = rounder(a/n);
		b = rounder(b/n);
		c = 1-a-b;
		}
	else {
		a = 1;
		b = 0;
		c = 0;
		}
	Upd();
	}

function Updra() {
	var t = rounder(document.getElementById("ar").value);
	if (document.getElementById("ac").checked) {
		b = rounder(b+(a-t)/2);
		c = rounder(1-t-b);
		}
	a = t;
	Upd();
	}

function Updrb() {
	var t = rounder(document.getElementById("br").value);
	if (document.getElementById("ac").checked) {
		a = rounder(a+(b-t)/2);
		c = rounder(1-t-a);
		}
	b = t;
	Upd();
	}

function Updrc() {
	var t = rounder(document.getElementById("cr").value);
	if (document.getElementById("ac").checked) {
		b = rounder(b+(c-t)/2);
		a = rounder(1-t-b);
		}
	c = t;
	Upd();
	}

function Updna() {
	}

function Updnb() {
	}

function Updnc() {
	}

function Updr() { //updates number boxes based on range sliders
	document.getElementById("an").value = document.getElementById("ar").value;
	document.getElementById("bn").value = document.getElementById("br").value;
	document.getElementById("cn").value = document.getElementById("cr").value;
	Upd();
	}

function Upd() {
	getvars();
	updui();
	updateobjects();
	}

function updateobjects() {
	doDispose(scene);
	scene = new THREE.Scene();
	scene.background = new THREE.Color("lightgray");
	bootobjects();
	}

var cubeverts = [[-1,-1,-1],[1,-1,-1],[-1,1,-1],[-1,-1,1],[1,1,-1],[1,-1,1],[-1,1,1],[1,1,1]];

var averts = [[-10,5.5,5.5],[5.5,-10,5.5],[5.5,5.5,-10]];

var aedges = [[0,1],[1,2],[2,0]];

var bverts = [[-10,-10],[-10,10],[10,10],[10,-10]];

var bfaces = [[0,1,2],[0,2,3]];

var bedges = [[0,1],[1,2],[2,3],[3,0]];

var cubefaces = [[0,1,3],[1,3,5],[3,5,6],[5,6,7],[1,4,5],[4,5,7],[0,1,2],[1,2,4],[2,4,6],[4,6,7],[0,2,3],[2,3,6]];

var cubeedges = [[0,3],[3,6],[6,2],[2,0],[0,1],[3,5],[6,7],[2,4],[1,5],[5,7],[7,4],[4,1]];

function spanvert(i) {//returns ith vertex of span
	var cv = cubeverts[i];
	var r1 = 10*cv[0]*u1 + 10*cv[1]*v1 + 10*cv[2]*w1;
	var r2 = 10*cv[0]*u2 + 10*cv[1]*v2 + 10*cv[2]*w2;
	var r3 = 10*cv[0]*u3 + 10*cv[1]*v3 + 10*cv[2]*w3;
	return([r1,r2,r3]);
	}

function aspanvert(i) {
	var av = averts[i];
	var r1 = av[0]*u1 + av[1]*v1 + av[2]*w1;
	var r2 = av[0]*u2 + av[1]*v2 + av[2]*w2;
	var r3 = av[0]*u3 + av[1]*v3 + av[2]*w3;
	return([r1,r2,r3]);
	}

function bspanvert(i) {
	var bv = bverts[i];
	var r1 = u1 + bv[0]*v1 + bv[1]*w1;
	var r2 = u2 + bv[0]*v2 + bv[1]*w2;
	var r3 = u3 + bv[0]*v3 + bv[1]*w3;
	return([r1,r2,r3]);
	}

function bootspan() {
	if (!document.getElementById("lspan").checked) {return;}
	var spangeo = new THREE.Geometry();
	var i;
	for (i = 0; i < cubeverts.length; i++) {
		spangeo.vertices.push(vec2vec(spanvert(i)));
		}
	for (i = 0; i < cubefaces.length; i++) {
		spangeo.faces.push(new THREE.Face3(cubefaces[i][0],cubefaces[i][1],cubefaces[i][2]));
		}
	spangeo.computeFaceNormals();
	spangeo.computeVertexNormals();
	var spanmat = new THREE.MeshLambertMaterial({side:THREE.DoubleSide,transparent:true,opacity:.7,color:0xff8c00});
	var span = new THREE.Mesh(spangeo,spanmat);
	scene.add(span);

	for (i = 0; i < cubeedges.length; i++) {
		thickline(spanvert(cubeedges[i][0]),spanvert(cubeedges[i][1]),0xff8c00,.01);
		}
	for (i = 0; i < cubeverts.length; i++) {
		var vg = new THREE.SphereGeometry(.05);
		var vv = new THREE.Mesh(vg,spanmat);
		vv.position.copy(vec2vec(spanvert(i)));
		scene.add(vv);
		}

	}

function bootaspan() {
	if (!document.getElementById("aspan").checked) {return;}
	var aspangeo = new THREE.Geometry();
	var i;
	for (i = 0; i < averts.length; i++) {
		aspangeo.vertices.push(vec2vec(aspanvert(i)));
		}
	aspangeo.faces.push(new THREE.Face3(0,1,2));
	aspangeo.computeFaceNormals();
	aspangeo.computeVertexNormals();
	var aspanmat = new THREE.MeshLambertMaterial({side:THREE.DoubleSide,transparent:true,opacity:.7,color:0xee82ee});
	var aspan = new THREE.Mesh(aspangeo,aspanmat);
	scene.add(aspan);

	for (i = 0; i < aedges.length; i++) {
		thickline(aspanvert(aedges[i][0]),aspanvert(aedges[i][1]),0xee82ee,.01);
		}
	
	for (i = 0; i < averts.length; i++) {
		var vg = new THREE.SphereGeometry(.05);
		var vv = new THREE.Mesh(vg,aspanmat);
		vv.position.copy(vec2vec(aspanvert(i)));
		scene.add(vv);
		}
	}

function bootbspan() {
	if (!document.getElementById("bspan").checked) {return;}
	var bspangeo = new THREE.Geometry();
	var i;
	for (i = 0; i < bverts.length; i++) {
		bspangeo.vertices.push(vec2vec(bspanvert(i)));
		}
	for (i = 0; i < bfaces.length; i++) {
		bspangeo.faces.push(new THREE.Face3(bfaces[i][0],bfaces[i][1],bfaces[i][2]));
		}
	bspangeo.computeFaceNormals();
	bspangeo.computeVertexNormals();
	var bspanmat = new THREE.MeshLambertMaterial({side:THREE.DoubleSide,transparent:true,opacity:.7,color:0x339966});
	var bspan = new THREE.Mesh(bspangeo,bspanmat);
	scene.add(bspan);

	for (i = 0; i < bedges.length; i++) {
		thickline(bspanvert(bedges[i][0]),bspanvert(bedges[i][1]),0x339966,.01);
		}
	
	for (i = 0; i < bverts.length; i++) {
		var vg = new THREE.SphereGeometry(.05);
		var vv = new THREE.Mesh(vg,bspanmat);
		vv.position.copy(vec2vec(bspanvert(i)));
		scene.add(vv);
		}
	}

function bootobjects() {
	scene.add(new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(0,0,0), 1, 0x00ffff));
	scene.add(new THREE.ArrowHelper(new THREE.Vector3(0,1,0), new THREE.Vector3(0,0,0), 1, 0xff00ff));
	scene.add(new THREE.ArrowHelper(new THREE.Vector3(0,0,1), new THREE.Vector3(0,0,0), 1, 0xffff00));
	var gridXZ = new THREE.GridHelper(6,6,"gray","gray");
	gridXZ.position.set(0,0,0);
	scene.add(gridXZ);

	var gridXY = new THREE.GridHelper(6,6,"gray","gray");
	gridXY.position.set(0,0,0);
	gridXY.rotation.x = Math.PI/2;
	scene.add(gridXY);

	var gridYZ = new THREE.GridHelper(6,6,"gray","gray");
	gridYZ.position.set(0,0,0);
	gridYZ.rotation.z = Math.PI/2;
	scene.add(gridYZ);

	thickvector([0,0,0],[u1,u2,u3],0xff0000);
	thickvector([0,0,0],[x1,x2,x3],"black");
	thickvector([0,0,0],[v1,v2,v3],0x00ff00);
	thickvector([0,0,0],[w1,w2,w3],0x0000ff);

	var dl;
	var pts = [[0,1,0],[0,-1,0],[1,0,0],[-1,0,0],[0,0,1],[0,0,-1]];
	for (i = 0; i < 6; i++) {
		dl = new THREE.DirectionalLight(0xffffff,.5);
		dl.position.set(pts[i][0],pts[i][1],pts[i][2]);
		scene.add(dl);
		}

	bootspan();
	bootaspan();
	bootbspan();
	}

function doDispose(obj) //from stackexchange
{
    if (obj !== null)
    {
        for (var i = 0; i < obj.children.length; i++)
        {
            doDispose(obj.children[i]);
        }
        if (obj.geometry)
        {
            obj.geometry.dispose();
            obj.geometry = undefined;
        }
        if (obj.material)
        {
            if (obj.material.map)
            {
                obj.material.map.dispose();
                obj.material.map = undefined;
            }
            obj.material.dispose();
            obj.material = undefined;
        }
    }
    obj = undefined;
}

</script>
</head>
<body onLoad="boot()">
<table border = 0>
<tr> <td> <b style="color:#ff0000">u</b> = </td><td>
<table border = 0>
<tr> <td rowspan=3 style="border-left:1px solid; border-top:1px solid; border-bottom:1px solid"> </td>
<td> <input type ="number" id="u1" value="0" oninput="Upd()" style="width: 3em"> </td>
<td rowspan=3 style="border-right:1px solid; border-top:1px solid; border-bottom:1px solid"> </td> </tr> 
<tr> 
<td> <input type ="number" id="u2" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr> <tr>
<td> <input type ="number" id="u3" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr>
</table> </td> <td> <b style="color:#00ff00">v</b> = </td> <td>
<table border = 0>
<tr> <td rowspan=3 style="border-left:1px solid; border-top:1px solid; border-bottom:1px solid"> </td>
<td> <input type ="number" id="v1" value="0" oninput="Upd()" style="width: 3em"> </td>
<td rowspan=3 style="border-right:1px solid; border-top:1px solid; border-bottom:1px solid"> </td> </tr> 
<tr> 
<td> <input type ="number" id="v2" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr> <tr>
<td> <input type ="number" id="v3" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr>
</table> </td> <td> <b style="color:#0000ff">w</b> = </td> <td>
<table border = 0>
<tr> <td rowspan=3 style="border-left:1px solid; border-top:1px solid; border-bottom:1px solid"> </td>
<td> <input type ="number" id="w1" value="0" oninput="Upd()" style="width: 3em"> </td>
<td rowspan=3 style="border-right:1px solid; border-top:1px solid; border-bottom:1px solid"> </td> </tr> 
<tr> 
<td> <input type ="number" id="w2" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr> <tr>
<td> <input type ="number" id="w3" value="0" oninput="Upd()" style="width: 3em"> </td>
</tr>
</table> </td> <td> <b> x </b> = a <b style="color:#ff0000">u</b> + b <b style="color:#00ff00">v</b> + c <b style="color:#0000ff">w</b> = </td> <td>
<table border = 0>
<tr> <td rowspan=3 style="border-left:1px solid; border-top:1px solid; border-bottom:1px solid"> </td>
<td> <div id = "x1"> 0 </div> </td>
<td rowspan=3 style="border-right:1px solid; border-top:1px solid; border-bottom:1px solid"> </td> </tr> 
<tr> 
<td> <div id = "x2"> 0 </div> </td>
</tr> <tr>
<td> <div id = "x3"> 0 </div> </td>
</tr>
</table>
</tr> </table>
<table>
<tr> <td> a </td> <td> <input type="range" min="-10" max="10" value="0" step =.05 id="ar" oninput="Updra()" style="width:50em"> </td> <td> <input type="number" id="an" oninput="Updna()" value=0 step=.05 style="width:4em"> </td> </tr>
<tr> <td> b </td> <td> <input type="range" min="-10" max="10" value="0" step =.05 id="br" oninput="Updrb()" style="width:50em"> </td> <td> <input type="number" id="bn" oninput="Updnb()" value=0 step=.05 style="width:4em"> </td> </tr>
<tr> <td> c </td> <td> <input type="range" min="-10" max="10" value="0" step =.05 id="cr" oninput="Updrc()" style="width:50em"> </td> <td> <input type="number" id="cn" oninput="Updnc()" value=0 step=.05 style="width:4em"> </td> </tr>
</table>
<input type="checkbox" id="ac" onchange="AC()"> Allow only affine combinations above
<input type="checkbox" id="lspan" onchange="Upd()"> Show <font style="color:#ff8c00"> (linear) span </font>
<input type="checkbox" id="aspan" onchange="Upd()"> Show <font style="color:#ee82ee"> affine span </font>
<input type="checkbox" id="bspan" onchange="Upd()"> Show <font style="color:#339966"> the set </font> of all <b>u</b> + b<b>v</b> + c<b>w</b><br>
Hint: To work with the affine span of only two vectors, you'll need to set the third vector to be equal to one of the other two.<br>
<canvas id="three" width=500 height=500> </canvas> <br>
</body>
</html>